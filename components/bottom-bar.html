<!-- Bottom Bar Component -->
<div class="fixed bottom-0 left-0 right-0 bg-white border-t shadow-lg z-50 md:hidden" x-data="{
  showFullSummary: false,
  get totalPrice() {
    return $store.booking.calculateTotal();
  },
  get selectedRoom() {
    return $store.booking.selectedRoom;
  },
  get activeCustomizations() {
    return $store.booking.getActiveCustomizations();
  }
}">
    <!-- Bottom Bar Content -->
    <div class="px-4 py-3">
        <div class="flex items-center justify-between">
            <!-- Price Summary -->
            <div class="flex flex-col">
                <span class="text-sm text-gray-500">Total por noche</span>
                <span class="text-xl font-bold">â‚¬<span x-text="totalPrice.toFixed(2)"></span></span>
            </div>

            <!-- Selected Options Summary -->
            <div class="flex items-center gap-2">
                <template x-if="selectedRoom">
                    <span class="text-xs bg-gray-100 px-2 py-1 rounded-full truncate max-w-[100px]"
                        x-text="selectedRoom.name"></span>
                </template>
                <template x-if="activeCustomizations.length > 0">
                    <span class="text-xs bg-gray-100 px-2 py-1 rounded-full"
                        x-text="`+${activeCustomizations.length} extras`"></span>
                </template>
            </div>

            <!-- Action Button -->
            <button @click="showFullSummary = true"
                class="bg-black text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-800 transition-colors">
                Ver resumen
            </button>
        </div>
    </div>

    <!-- Full Summary Modal -->
    <div x-show="showFullSummary" x-transition:enter="transition ease-out duration-300"
        x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100"
        x-transition:leave="transition ease-in duration-300" x-transition:leave-start="opacity-100"
        x-transition:leave-end="opacity-0" class="fixed inset-0 bg-black bg-opacity-50 z-[60] flex items-end"
        @click.self="showFullSummary = false">
        <div x-transition:enter="transition ease-out duration-300" x-transition:enter-start="transform translate-y-full"
            x-transition:enter-end="transform translate-y-0" x-transition:leave="transition ease-in duration-300"
            x-transition:leave-start="transform translate-y-0" x-transition:leave-end="transform translate-y-full"
            class="bg-white w-full rounded-t-2xl max-h-[90vh] overflow-y-auto">
            <!-- Modal Header -->
            <div class="sticky top-0 bg-white border-b px-4 py-3 flex items-center justify-between">
                <h3 class="text-lg font-semibold">Resumen de precios</h3>
                <button @click="showFullSummary = false" class="text-gray-500 hover:text-gray-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>

            <!-- Modal Content -->
            <div class="p-4 pb-20">
                <div id="mobile-pricing-summary"></div>
            </div>
        </div>
    </div>
</div>