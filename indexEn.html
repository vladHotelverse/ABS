<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Booking Experience</title>

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Alpine.js -->
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@0.294.0/dist/umd/lucide.min.js"></script>

    <style>
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 1rem;
        }

        .logo-container {
            position: relative;
            height: 35px;
            width: 180px;
            overflow: visible;
            display: flex;
            align-items: center;
        }

        #initialH {
            position: absolute;
            height: 30px;
            width: auto;
            transform-style: preserve-3d;
            animation: rotate3D 2s ease-in-out forwards;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.3));
        }

        @keyframes rotate3D {
            0% {
                transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1);
            }

            50% {
                transform: rotateX(270deg) rotateY(180deg) rotateZ(90deg) scale(0.9) translateX(-3px);
            }

            100% {
                transform: rotateX(0deg) rotateY(360deg) rotateZ(0deg) scale(0.7) translateX(-7px);
            }
        }

        #fullText {
            position: absolute;
            width: 80%;
            max-width: 1200px;
            height: auto;
            opacity: 0;
        }

        .text-path {
            fill: #ffffff;
            opacity: 0;
        }

        .h-path {
            fill: #ffffff;
            opacity: 1;
        }
    </style>
</head>

<body class="bg-gray-100">
    <div x-data x-init="setTimeout(() => lucide.createIcons(), 0)">

        <!-- Header Section (Sticky with Price) -->
        <header class="bg-black text-white sticky top-0 z-50 shadow-md sticky top-0" x-data="{
    // Get the total from the global store
    get totalPrice() {
      return $store.booking?.calculateTotal() + $store.booking?.calculateTaxes() || 0;
    }
  }">
            <div class="container mx-auto py-3 px-4">
                <div class="flex justify-between items-center">
                    <!-- 3D Animated Logo -->
                    <div class="logo-container">

                        <!-- Initial H that rotates -->
                        <svg id="initialH" height="35" viewBox="0 0 190 200" xmlns="http://www.w3.org/2000/svg"
                            preserveAspectRatio="xMinYMid meet">
                            <path class="h-path"
                                d="M0.780029 195.68V0H43.57V78.82H145.57V0H188.36V195.68H145.6V119H43.6V195.65L0.780029 195.68Z">
                            </path>
                        </svg>

                        <!-- Full text SVG -->
                        <svg id="fullText" viewBox="0 0 1474 201" xmlns="http://www.w3.org/2000/svg">
                            <!-- H (initial visible) -->
                            <path class="h-path"
                                d="M0.780029 195.68V0H43.57V78.82H145.57V0H188.36V195.68H145.6V119H43.6V195.65L0.780029 195.68Z">
                            </path>

                            <!-- Rest of the letters -->
                            <path class="text-path"
                                d="M342.21 177C329.337 192.88 309.807 200.82 283.62 200.82C257.433 200.82 237.893 192.88 225 177C212.14 161.12 205.71 142.003 205.71 119.65C205.71 97.65 212.14 78.6066 225 62.52C237.86 46.4333 257.39 38.3766 283.59 38.35C309.777 38.35 329.307 46.4066 342.18 62.52C355.053 78.6333 361.483 97.6766 361.47 119.65C361.49 142.03 355.07 161.147 342.21 177ZM310.33 155C316.57 146.713 319.693 134.937 319.7 119.67C319.707 104.403 316.583 92.6533 310.33 84.42C304.083 76.18 295.133 72.06 283.48 72.06C271.827 72.06 262.853 76.18 256.56 84.42C250.28 92.66 247.137 104.41 247.13 119.67C247.123 134.93 250.267 146.707 256.56 155C262.86 163.28 271.833 167.42 283.48 167.42C295.127 167.42 304.077 163.28 310.33 155Z">
                            </path>
                            <path class="text-path"
                                d="M362.91 73.05V44.67H384.16V0H423.6V44.64H448.34V73.02H423.6V153.56C423.6 159.813 424.39 163.703 425.97 165.23C427.55 166.757 432.397 167.527 440.51 167.54C441.73 167.54 443.01 167.54 444.36 167.47C445.71 167.4 447.04 167.36 448.36 167.26V197.04L429.49 197.74C410.657 198.407 397.793 195.143 390.9 187.95C386.42 183.39 384.18 176.353 384.18 166.84V73.05H362.91Z">
                            </path>
                            <path class="text-path"
                                d="M569.1 46.36C579.844 51.2132 588.978 59.033 595.43 68.9C601.829 78.3399 605.985 89.1179 607.58 100.41C608.647 107.41 609.083 117.493 608.89 130.66H497.89C498.51 145.947 503.823 156.667 513.83 162.82C519.91 166.64 527.243 168.55 535.83 168.55C544.903 168.55 552.277 166.217 557.95 161.55C561.361 158.638 564.152 155.071 566.16 151.06H606.84C605.773 160.107 600.85 169.29 592.07 178.61C578.41 193.43 559.297 200.84 534.73 200.84C514.437 200.84 496.543 194.59 481.05 182.09C465.557 169.59 457.803 149.257 457.79 121.09C457.79 94.69 464.79 74.4467 478.79 60.36C492.79 46.2733 510.957 39.23 533.29 39.23C546.537 39.2233 558.473 41.6 569.1 46.36ZM509.48 80.78C503.853 86.5933 500.317 94.4567 498.87 104.37H567.52C566.787 93.8033 563.247 85.7767 556.9 80.29C550.553 74.8033 542.677 72.0633 533.27 72.07C523.043 72.07 515.113 74.9733 509.48 80.78V80.78Z">
                            </path>
                            <path class="text-path" d="M665.58 195.68H625.73V0H665.58V195.68Z"></path>
                            <path class="text-path"
                                d="M786.89 43.27H829.67L774.67 195.68H732.67L678 43.27H722.75L754.49 155.69L786.89 43.27Z">
                            </path>
                            <path class="text-path"
                                d="M940.11 46.36C950.855 51.2158 959.992 59.0349 966.45 68.9C972.841 78.3428 976.994 89.1198 978.59 100.41C979.67 107.41 980.11 117.493 979.91 130.66H868.91C869.523 145.947 874.833 156.667 884.84 162.82C890.933 166.64 898.267 168.55 906.84 168.55C915.92 168.55 923.297 166.217 928.97 161.55C932.377 158.637 935.166 155.07 937.17 151.06H977.86C976.78 160.107 971.853 169.29 963.08 178.61C949.433 193.43 930.323 200.84 905.75 200.84C885.463 200.84 867.567 194.59 852.06 182.09C836.553 169.59 828.8 149.257 828.8 121.09C828.8 94.69 835.8 74.4467 849.8 60.36C863.8 46.2733 881.967 39.23 904.3 39.23C917.54 39.2233 929.477 41.6 940.11 46.36ZM880.5 80.78C874.873 86.5933 871.333 94.4567 869.88 104.37H938.54C937.807 93.8033 934.267 85.7767 927.92 80.29C921.573 74.8033 913.693 72.0633 904.28 72.07C894.06 72.07 886.133 74.9733 880.5 80.78V80.78Z">
                            </path>
                            <path class="text-path"
                                d="M1080.57 39.7C1081.08 39.75 1082.23 39.82 1084 39.91V80.74C1081.48 80.46 1079.25 80.28 1077.29 80.18C1075.33 80.08 1073.75 80.04 1072.54 80.04C1056.5 80.04 1045.73 85.26 1040.24 95.7C1037.16 101.58 1035.62 110.623 1035.62 122.83V195.68H995.49V43.27H1033.49V69.84C1039.64 59.68 1045 52.7333 1049.56 49C1057.02 42.76 1066.72 39.6367 1078.65 39.63C1079.43 39.63 1080.06 39.66 1080.57 39.7Z">
                            </path>
                            <path class="text-path"
                                d="M1134.1 147C1134.95 154.08 1136.78 159.113 1139.58 162.1C1144.55 167.433 1153.73 170.1 1167.12 170.1C1174.98 170.1 1181.23 168.933 1185.87 166.6C1190.51 164.267 1192.84 160.773 1192.87 156.12C1192.95 154.07 1192.47 152.037 1191.48 150.239C1190.5 148.44 1189.04 146.944 1187.27 145.91C1183.53 143.577 1169.63 139.577 1145.58 133.91C1128.25 129.617 1116.05 124.253 1108.98 117.82C1101.89 111.493 1098.34 102.36 1098.35 90.42C1098.35 76.3533 1103.88 64.26 1114.95 54.14C1126.02 44.02 1141.59 38.9633 1161.68 38.97C1180.74 38.97 1196.27 42.7666 1208.27 50.36C1220.27 57.9533 1227.16 71.0733 1228.94 89.72H1189.09C1188.53 84.6 1187.08 80.5466 1184.75 77.56C1180.35 72.1533 1172.87 69.45 1162.31 69.45C1153.64 69.45 1147.45 70.8 1143.73 73.5C1140.04 76.21 1138.2 79.37 1138.2 83.01C1138.09 85.0619 1138.59 87.1001 1139.64 88.8674C1140.69 90.6346 1142.24 92.0518 1144.09 92.94C1148.01 95.08 1161.88 98.7466 1185.69 103.94C1201.57 107.673 1213.47 113.313 1221.39 120.86C1229.31 128.407 1233.23 137.96 1233.14 149.52C1233.14 164.633 1227.51 176.967 1216.25 186.52C1204.99 196.073 1187.57 200.85 1164 200.85C1140 200.85 1122.28 195.793 1110.83 185.68C1099.38 175.567 1093.67 162.673 1093.7 147H1134.1Z">
                            </path>
                            <path class="text-path"
                                d="M1357.62 46.36C1368.38 51.2038 1377.54 59.0246 1384 68.9C1390.39 78.3428 1394.54 89.1198 1396.14 100.41C1397.22 107.41 1397.66 117.493 1397.46 130.66H1286.46C1287.07 145.947 1292.38 156.667 1302.39 162.82C1308.48 166.64 1315.82 168.55 1324.39 168.55C1333.46 168.55 1340.84 166.217 1346.51 161.55C1349.92 158.637 1352.71 155.07 1354.71 151.06H1395.4C1394.32 160.107 1389.39 169.29 1380.62 178.61C1366.97 193.43 1347.86 200.84 1323.29 200.84C1303 200.84 1285.11 194.59 1269.6 182.09C1254.09 169.59 1246.34 149.257 1246.35 121.09C1246.35 94.69 1253.35 74.4467 1267.35 60.36C1281.35 46.2733 1299.52 39.23 1321.85 39.23C1335.08 39.2233 1347 41.6 1357.62 46.36ZM1298 80.78C1292.37 86.5933 1288.83 94.4567 1287.38 104.37H1356.04C1355.31 93.8033 1351.77 85.7767 1345.42 80.29C1339.07 74.8033 1331.2 72.0633 1321.79 72.07C1311.57 72.07 1303.64 74.9733 1298 80.78Z">
                            </path>
                            <path class="text-path" d="M1473.62 152.09H1430.04V195.67H1473.62V152.09Z"></path>

                        </svg>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="text-right">
                            <p class="text-xs text-gray-300">Total:</p>
                            <p class="text-base font-medium">€<span x-text="totalPrice.toFixed(2)"></span></p>
                        </div>
                        <div class="bg-white/10 p-2 rounded-full">
                            <i data-lucide="shopping-cart" class="h-6 w-6"></i>
                        </div>

                    </div>
                </div>
            </div>
        </header>

        <!-- Booking Information Bar with Sticky-to-Fixed Transition -->
        <div x-data="{ scrolled: false }"
            x-init="window.addEventListener('scroll', () => { scrolled = window.scrollY > 200 })">
            <!-- Hotel Image Banner - Always visible at the top of the page -->
            <section class="bg-white">
                <div class="w-full overflow-hidden h-64 container">
                    <img src="https://hvdataprostgweu.blob.core.windows.net/renderimages/h305/views/01_main/01d77a02-b92f-4214-a87c-79920dcbeded/background.webp"
                        alt="Hotel exterior view" class="w-full h-full object-cover rounded"
                        onerror="this.src='https://cdnjs.cloudflare.com/ajax/libs/placeholder-loading/0.6.0/img/background.jpg'">
                </div>
            </section>

            <!-- Normal Booking Bar (Non-scrolled) - Uses sticky positioning -->
            <div x-show="!scrolled" class="sticky top-0 z-40 bg-white shadow-md">
                <!-- Desktop version -->
                <div class="hidden md:block">
                    <div class="container mx-auto py-3">
                        <h4 class="ml-4 mb-2">Your Booking Information</h4>
                        <div class="flex flex-wrap items-center justify-between px-4">
                            <!-- Reservation Code -->
                            <div class="flex items-center gap-2 py-2">
                                <i data-lucide="tag" class="h-4 w-4 text-gray-600"></i>
                                <div>
                                    <p class="text-xs text-gray-500">Reservation Code</p>
                                    <p class="text-sm font-medium">1003066AU</p>
                                </div>
                            </div>

                            <!-- Stay Dates -->
                            <div class="flex items-center gap-2 py-2">
                                <i data-lucide="calendar" class="h-4 w-4 text-gray-600"></i>
                                <div>
                                    <p class="text-xs text-gray-500">Stay Dates</p>
                                    <p class="text-sm font-medium">01/01/2025 - 01/01/2025</p>
                                </div>
                            </div>

                            <!-- Room Type -->
                            <div class="flex items-center gap-2 py-2">
                                <i data-lucide="home" class="h-4 w-4 text-gray-600"></i>
                                <div>
                                    <p class="text-xs text-gray-500">Room Type</p>
                                    <p class="text-sm font-medium">Deluxe Double Room</p>
                                </div>
                            </div>

                            <!-- Status -->
                            <!-- <div class="flex items-center gap-2 py-2">
                                <i data-lucide="check-circle" class="h-4 w-4 text-green-600"></i>
                                <div>
                                    <p class="text-xs text-gray-500">Status</p>
                                    <p class="text-sm font-medium text-green-600">Confirmed</p>
                                </div>
                            </div> -->
                        </div>
                    </div>
                </div>

                <!-- Mobile version - simplified for smaller screens -->
                <div class="block md:hidden">
                    <div class="container mx-auto py-3">
                        <div class="grid grid-cols-2 gap-2">
                            <!-- Reservation Code -->
                            <div class="flex items-center gap-2 px-2 py-1">
                                <i data-lucide="tag" class="h-4 w-4 text-gray-600"></i>
                                <div>
                                    <p class="text-xs text-gray-500">Code</p>
                                    <p class="text-sm font-medium">1003066AU</p>
                                </div>
                            </div>

                            <!-- Status -->
                            <!-- <div class="flex items-center gap-2 px-2 py-1">
                                <i data-lucide="check-circle" class="h-4 w-4 text-green-600"></i>
                                <div>
                                    <p class="text-xs text-gray-500">Status</p>
                                    <p class="text-sm font-medium text-green-600">Confirmed</p>
                                </div>
                            </div> -->

                            <!-- Stay Dates -->
                            <div class="flex items-center gap-2 px-2 py-1">
                                <i data-lucide="calendar" class="h-4 w-4 text-gray-600"></i>
                                <div>
                                    <p class="text-xs text-gray-500">Dates</p>
                                    <p class="text-sm font-medium">01/01/2025 - 01/01/2025</p>
                                </div>
                            </div>

                            <!-- Room Type -->
                            <div class="flex items-center gap-2 px-2 py-1">
                                <i data-lucide="home" class="h-4 w-4 text-gray-600"></i>
                                <div>
                                    <p class="text-xs text-gray-500">Room</p>
                                    <p class="text-sm font-medium">Deluxe Double</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Fixed Booking Bar (Scrolled) - Uses fixed positioning -->
            <div x-show="scrolled" class="fixed top-0 left-0 right-0 z-50 bg-white shadow-md">
                <!-- Desktop version -->
                <div class="hidden md:block">
                    <div class="container mx-auto py-3">
                        <div class="flex flex-wrap items-center justify-between px-4">
                            <!-- Reservation Code -->
                            <div class="flex items-center gap-2 py-2">
                                <i data-lucide="tag" class="h-4 w-4 text-gray-600"></i>
                                <div>
                                    <p class="text-xs text-gray-500">Reservation Code</p>
                                    <p class="text-sm font-medium">1003066AU</p>
                                </div>
                            </div>

                            <!-- Stay Dates -->
                            <div class="flex items-center gap-2 py-2">
                                <i data-lucide="calendar" class="h-4 w-4 text-gray-600"></i>
                                <div>
                                    <p class="text-xs text-gray-500">Stay Dates</p>
                                    <p class="text-sm font-medium">01/01/2025 - 01/01/2025</p>
                                </div>
                            </div>

                            <!-- Room Type -->
                            <div class="flex items-center gap-2 py-2">
                                <i data-lucide="home" class="h-4 w-4 text-gray-600"></i>
                                <div>
                                    <p class="text-xs text-gray-500">Room Type</p>
                                    <p class="text-sm font-medium">Deluxe Double Room</p>
                                </div>
                            </div>

                            <!-- Status -->
                            <!-- <div class="flex items-center gap-2 py-2">
                                <i data-lucide="check-circle" class="h-4 w-4 text-green-600"></i>
                                <div>
                                    <p class="text-xs text-gray-500">Status</p>
                                    <p class="text-sm font-medium text-green-600">Confirmed</p>
                                </div>
                            </div> -->
                        </div>
                    </div>
                </div>

                <!-- Mobile version - simplified for smaller screens -->
                <div class="block md:hidden">
                    <div class="container mx-auto py-3">
                        <div class="grid grid-cols-2 gap-2">
                            <!-- Reservation Code -->
                            <div class="flex items-center gap-2 px-2 py-1">
                                <i data-lucide="tag" class="h-4 w-4 text-gray-600"></i>
                                <div>
                                    <p class="text-xs text-gray-500">Code</p>
                                    <p class="text-sm font-medium">1003066AU</p>
                                </div>
                            </div>

                            <!-- Status -->
                            <!-- <div class="flex items-center gap-2 px-2 py-1">
                                <i data-lucide="check-circle" class="h-4 w-4 text-green-600"></i>
                                <div>
                                    <p class="text-xs text-gray-500">Status</p>
                                    <p class="text-sm font-medium text-green-600">Confirmed</p>
                                </div>
                            </div> -->

                            <!-- Stay Dates -->
                            <div class="flex items-center gap-2 px-2 py-1">
                                <i data-lucide="calendar" class="h-4 w-4 text-gray-600"></i>
                                <div>
                                    <p class="text-xs text-gray-500">Dates</p>
                                    <p class="text-sm font-medium">01/01/2025 - 01/01/2025</p>
                                </div>
                            </div>

                            <!-- Room Type -->
                            <div class="flex items-center gap-2 px-2 py-1">
                                <i data-lucide="home" class="h-4 w-4 text-gray-600"></i>
                                <div>
                                    <p class="text-xs text-gray-500">Room</p>
                                    <p class="text-sm font-medium">Deluxe Double</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Placeholder div to prevent content jump when the booking bar becomes fixed -->
            <div x-show="scrolled" class="h-16 md:h-20"></div>
        </div>
        <section class="grid grid-cols-1 md:grid-cols-[1fr_400px] container gap-4">
            <div class="">
                <!-- Room Selection Component with Clear Side Cards -->
                <div class="section bg-white p-6 rounded-lg shadow-sm" x-data="{
    selectedRoom: $store.booking.selectedRoom,
    activeIndex: 1, // Start with middle card active
    activeImageIndices: {
      0: 0,
      1: 0,
      2: 0
    },
    proposedPrice: 12, // Default proposed price
    minPrice: 10, // Minimum price for slider
    get maxPrice() {
      return this.roomOptions[this.activeIndex]?.price || 20;
    },
    get sliderPercentage() {
      return ((this.proposedPrice - this.minPrice) / (this.maxPrice - this.minPrice)) * 100;
    },
    roomOptions: [
    {
        id: 'modern-room',
        name: 'Modern Room',
        description: 'Contemporary space with minimalist design and smart technology.',
        amenities: ['Smart TV', 'Rain shower', 'Minibar', 'Premium WiFi'],
        price: 105,
        oldPrice: 125,
        images: [
          'https://hvdatauatstgweu.blob.core.windows.net/roomtypehotelimages/h70/rt726/53a88e60-a2a5-4a19-b435-a0d8958efff4/thumbnail.webp',
          'https://hvdatauatstgweu.blob.core.windows.net/roomtypehotelimages/h70/rt726/53a88e60-a2a5-4a19-b435-a0d8958efff4/thumbnail.webp',
          'https://hvdatauatstgweu.blob.core.windows.net/roomtypehotelimages/h70/rt726/53a88e60-a2a5-4a19-b435-a0d8958efff4/thumbnail.webp'
        ],
      },
      {
        id: 'royal-room',
        name: 'Royal Room',
        description: 'Luxury room with private balcony, rest area and exclusive services.',
        amenities: ['Large bed', 'Sea view', 'Private terrace', 'Living room'],
        price: 123,
        images: [
          'https://hvdatauatstgweu.blob.core.windows.net/roomtypehotelimages/h70/rt726/53a88e60-a2a5-4a19-b435-a0d8958efff4/thumbnail.webp',
          'https://hvdatauatstgweu.blob.core.windows.net/roomtypehotelimages/h70/rt726/53a88e60-a2a5-4a19-b435-a0d8958efff4/thumbnail.webp',
          'https://hvdatauatstgweu.blob.core.windows.net/roomtypehotelimages/h70/rt726/53a88e60-a2a5-4a19-b435-a0d8958efff4/thumbnail.webp'
        ],
      },
      {
        id: 'deluxe-suite',
        name: 'Deluxe Suite',
        description: 'Luxury suite with private balcony, ocean views and exclusive services.',
        amenities: ['King Size bed', 'Ocean panorama', 'Private terrace', 'Elegant bathroom'],
        price: 150,
        oldPrice: 180,
        images: [
          'https://hvdatauatstgweu.blob.core.windows.net/roomtypehotelimages/h70/rt726/53a88e60-a2a5-4a19-b435-a0d8958efff4/thumbnail.webp',
          'https://hvdatauatstgweu.blob.core.windows.net/roomtypehotelimages/h70/rt726/53a88e60-a2a5-4a19-b435-a0d8958efff4/thumbnail.webp',
          'https://hvdatauatstgweu.blob.core.windows.net/roomtypehotelimages/h70/rt726/53a88e60-a2a5-4a19-b435-a0d8958efff4/thumbnail.webp'
        ],
      }
    ],
    prevImage(index) {
      this.activeImageIndices[index] = this.activeImageIndices[index] > 0 
        ? this.activeImageIndices[index] - 1 
        : this.roomOptions[index].images.length - 1;
    },
    nextImage(index) {
      this.activeImageIndices[index] = (this.activeImageIndices[index] + 1) % this.roomOptions[index].images.length;
    },
    prevSlide() {
      this.activeIndex = this.activeIndex > 0 ? this.activeIndex - 1 : this.roomOptions.length - 1;
    },
    nextSlide() {
      this.activeIndex = (this.activeIndex + 1) % this.roomOptions.length;
    },
    setSlide(index) {
      this.activeIndex = index;
      // Update proposed price when switching rooms
      this.proposedPrice = Math.round((this.minPrice + this.maxPrice) / 2);
    },
    selectRoom(room) {
      // Update the local state
      this.selectedRoom = room;
      
      // Update the global state
      $store.booking.selectRoom(room);
    },
    makeOffer() {
      alert('You have proposed ' + this.proposedPrice + ' EUR per night');
    },
    init() {
      // Watch for changes in the global store
      this.$watch('$store.booking.selectedRoom', (value) => {
        this.selectedRoom = value;
      });
    }
  }">
                    <div class="mb-6">
                        <h2 class="text-2xl font-bold text-gray-900 mb-2">Want a Superior Room?</h2>
                        <p class="text-gray-600">
                            Instead of staying in a <span class="font-bold">Deluxe Room</span>, why not choose one with
                            <span class="font-bold">Ocean View</span>?
                        </p>
                    </div>

                    <div class="lg:col-span-2">
                        <!-- Slider Container with Visible Cards -->
                        <div class="relative w-full overflow-visible" style="height: 550px;">
                            <!-- Main Carousel Area -->
                            <style>
                                .card-carousel {
                                    width: 100%;
                                    position: relative;
                                    perspective: 1000px;
                                    height: 550px;
                                    overflow: hidden;
                                }

                                .card-container {
                                    width: 50%;
                                    position: absolute;
                                    transition: all 0.5s ease;
                                }

                                .card-container.active {
                                    top: 5px;
                                    left: 25%;
                                    z-index: 10;
                                }

                                .card-container.prev {
                                    left: -30%;
                                    z-index: 5;
                                    opacity: 0.7;
                                }

                                .card-container.next {
                                    left: 80%;
                                    z-index: 5;
                                    opacity: 0.7;
                                }

                                .badge-discount {
                                    position: absolute;
                                    top: 12px;
                                    right: 12px;
                                    background-color: #000;
                                    color: white;
                                    padding: 4px 8px;
                                    border-radius: 4px;
                                    font-weight: bold;
                                    font-size: 12px;
                                    z-index: 10;
                                }
                            </style>

                            <div class="card-carousel">
                                <!-- First Card (Left) -->
                                <div class="card-container"
                                    :class="{'active': activeIndex === 0, 'prev': activeIndex === 1, 'next': activeIndex === 2}"
                                    @click="setSlide(0)">
                                    <!-- Using Third Card Design -->
                                    <div class="border rounded-lg overflow-hidden shadow-sm bg-white h-full">
                                        <!-- Discount Badge -->
                                        <div class="badge-discount" x-show="roomOptions[0].oldPrice">
                                            <span
                                                x-text="`-${Math.round((1 - roomOptions[0].price/roomOptions[0].oldPrice) * 100)}%`"></span>
                                        </div>

                                        <!-- Room Image Carousel -->
                                        <div class="relative h-64 bg-gray-100">
                                            <img :src="roomOptions[0].images[activeImageIndices[0]]"
                                                :alt="roomOptions[0].name" class="object-cover w-full h-full" />

                                            <!-- Image Indicators -->
                                            <div class="absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1">
                                                <template x-for="(_, imgIndex) in roomOptions[0].images"
                                                    :key="imgIndex">
                                                    <span class="block h-2 w-2 rounded-full"
                                                        :class="activeImageIndices[0] === imgIndex ? 'bg-white' : 'bg-white/50'"></span>
                                                </template>
                                            </div>
                                        </div>

                                        <!-- Room Details -->
                                        <div class="p-4">
                                            <h3 class="text-xl font-bold text-gray-800 mb-1"
                                                x-text="roomOptions[0].name">
                                            </h3>
                                            <p class="text-sm text-gray-600 mb-3 min-h-10"
                                                x-text="roomOptions[0].description"></p>

                                            <!-- Amenities -->
                                            <div class="flex flex-nowrap gap-2 mb-3 w-full overflow-auto">
                                                <template x-for="(amenity, amenityIndex) in roomOptions[0].amenities"
                                                    :key="amenityIndex">
                                                    <span
                                                        class="text-xs border border-gray-200 px-3 py-1 rounded-md text-nowrap"
                                                        x-text="amenity"></span>
                                                </template>
                                            </div>

                                            <!-- Price Display -->
                                            <div class="flex items-center gap-2 mb-3">
                                                <span class="text-2xl font-bold"
                                                    x-text="'€' + roomOptions[0].price"></span>
                                                <span class="text-gray-500 line-through text-sm"
                                                    x-show="roomOptions[0].oldPrice"
                                                    x-text="'€' + roomOptions[0].oldPrice"></span>
                                                <span class="text-sm text-gray-500">/night</span>
                                            </div>

                                            <!-- Action Buttons -->
                                            <div class="flex items-center gap-4 mt-3">
                                                <button
                                                    class="px-6 py-2.5 text-sm font-medium rounded-md uppercase tracking-wide transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black"
                                                    :class="selectedRoom?.id === roomOptions[0].id ? 'bg-green-600 text-white shadow-md' : 'bg-black text-white hover:bg-gray-800'"
                                                    @click.stop="selectRoom(roomOptions[0])">
                                                    <span
                                                        x-text="selectedRoom?.id === roomOptions[0].id ? 'SELECTED' : 'SELECT'"></span>
                                                </button>

                                                <button class="text-sm text-gray-500 underline">
                                                    Discover more details
                                                </button>
                                            </div>

                                            <!-- Additional Info -->
                                            <p class="text-xs text-gray-500 mt-4">Information about rates and taxes.</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Second Card (Middle) -->
                                <div class="card-container"
                                    :class="{'active': activeIndex === 1, 'prev': activeIndex === 2, 'next': activeIndex === 0}"
                                    @click="setSlide(1)">
                                    <!-- Using Third Card Design -->
                                    <div class="border rounded-lg overflow-hidden shadow-sm bg-white h-full">
                                        <!-- Room Image Carousel -->
                                        <div class="relative h-64 bg-gray-100">
                                            <img :src="roomOptions[1].images[activeImageIndices[1]]"
                                                :alt="roomOptions[1].name" class="object-cover w-full h-full" />

                                            <!-- Image Indicators -->
                                            <div class="absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1">
                                                <template x-for="(_, imgIndex) in roomOptions[1].images"
                                                    :key="imgIndex">
                                                    <span class="block h-2 w-2 rounded-full"
                                                        :class="activeImageIndices[1] === imgIndex ? 'bg-white' : 'bg-white/50'"></span>
                                                </template>
                                            </div>
                                        </div>

                                        <!-- Room Details -->
                                        <div class="p-4">
                                            <h3 class="text-xl font-bold text-gray-800 mb-1"
                                                x-text="roomOptions[1].name">
                                            </h3>
                                            <p class="text-sm text-gray-600 mb-3 min-h-10"
                                                x-text="roomOptions[1].description"></p>

                                            <!-- Amenities -->
                                            <div class="flex flex-nowrap gap-2 mb-3 w-full overflow-auto">
                                                <template x-for="(amenity, amenityIndex) in roomOptions[1].amenities"
                                                    :key="amenityIndex">
                                                    <span
                                                        class="text-xs border border-gray-200 px-3 py-1 rounded-md text-nowrap"
                                                        x-text="amenity"></span>
                                                </template>
                                            </div>

                                            <!-- Price Display -->
                                            <div class="flex items-center gap-2 mb-3">
                                                <span class="text-2xl font-bold"
                                                    x-text="'€' + roomOptions[1].price"></span>
                                                <span class="text-sm text-gray-500">/night</span>
                                            </div>

                                            <!-- Action Buttons -->
                                            <div class="flex items-center gap-4 mt-3">
                                                <button
                                                    class="px-6 py-2.5 text-sm font-medium rounded-md uppercase tracking-wide transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black"
                                                    :class="selectedRoom?.id === roomOptions[1].id ? 'bg-green-600 text-white shadow-md' : 'bg-black text-white hover:bg-gray-800'"
                                                    @click.stop="selectRoom(roomOptions[1])">
                                                    <span
                                                        x-text="selectedRoom?.id === roomOptions[1].id ? 'SELECTED' : 'SELECT'"></span>
                                                </button>

                                                <button class="text-sm text-gray-500 underline">
                                                    Discover more details
                                                </button>
                                            </div>

                                            <!-- Additional Info -->
                                            <p class="text-xs text-gray-500 mt-4">Information about rates and taxes.</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Third Card (Right) - Original Design -->
                                <div class="card-container"
                                    :class="{'active': activeIndex === 2, 'prev': activeIndex === 0, 'next': activeIndex === 1}"
                                    @click="setSlide(2)">
                                    <div class="border rounded-lg overflow-hidden shadow-sm bg-white h-full">
                                        <!-- Room Image Carousel -->
                                        <div class="relative h-64 bg-gray-100">
                                            <img :src="roomOptions[2].images[activeImageIndices[2]]"
                                                :alt="roomOptions[2].name" class="object-cover w-full h-full" />

                                            <!-- Image Indicators -->
                                            <div class="absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1">
                                                <template x-for="(_, imgIndex) in roomOptions[2].images"
                                                    :key="imgIndex">
                                                    <span class="block h-2 w-2 rounded-full"
                                                        :class="activeImageIndices[2] === imgIndex ? 'bg-white' : 'bg-white/50'"></span>
                                                </template>
                                            </div>
                                        </div>

                                        <!-- Room Details -->
                                        <div class="p-4">
                                            <h3 class="text-xl font-bold text-gray-800 mb-1"
                                                x-text="roomOptions[2].name">
                                            </h3>
                                            <p class="text-sm text-gray-600 mb-3 min-h-10"
                                                x-text="roomOptions[2].description"></p>

                                            <!-- Amenities -->
                                            <div class="flex flex-nowrap gap-2 mb-3 w-full overflow-auto">
                                                <template x-for="(amenity, amenityIndex) in roomOptions[2].amenities"
                                                    :key="amenityIndex">
                                                    <span
                                                        class="text-xs border border-gray-200 px-3 py-1 rounded-md text-nowrap"
                                                        x-text="amenity"></span>
                                                </template>
                                            </div>

                                            <!-- Price Display -->
                                            <div class="flex items-center gap-2 mb-3">
                                                <span class="text-2xl font-bold"
                                                    x-text="'€' + roomOptions[2].price"></span>
                                                <span class="text-gray-500 line-through text-sm"
                                                    x-show="roomOptions[2].oldPrice"
                                                    x-text="'€' + roomOptions[2].oldPrice"></span>
                                                <span class="text-sm text-gray-500">/night</span>
                                            </div>

                                            <!-- Action Buttons -->
                                            <div class="flex items-center gap-4 mt-3">
                                                <button
                                                    class="px-6 py-2.5 text-sm font-medium rounded-md uppercase tracking-wide transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black"
                                                    :class="selectedRoom?.id === roomOptions[2].id ? 'bg-green-600 text-white shadow-md' : 'bg-black text-white hover:bg-gray-800'"
                                                    @click.stop="selectRoom(roomOptions[2])">
                                                    <span
                                                        x-text="selectedRoom?.id === roomOptions[2].id ? 'SELECTED' : 'SELECT'"></span>
                                                </button>

                                                <button class="text-sm text-gray-500 underline">
                                                    Discover more details
                                                </button>
                                            </div>

                                            <!-- Additional Info -->
                                            <p class="text-xs text-gray-500 mt-4">Information about rates and taxes.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Arrow Navigation Controls -->
                            <button @click="prevSlide"
                                class="absolute left-0 top-1/2 -translate-y-1/2 z-20 bg-white rounded-full shadow-md p-2 ml-2 transition-all duration-200 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-2"
                                aria-label="Previous room">
                                <i data-lucide="chevron-left" class="h-6 w-6"></i>
                            </button>

                            <button @click="nextSlide"
                                class="absolute right-0 top-1/2 -translate-y-1/2 z-20 bg-white rounded-full shadow-md p-2 mr-2 transition-all duration-200 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-black focus:ring-offset-2"
                                aria-label="Next room">
                                <i data-lucide="chevron-right" class="h-6 w-6"></i>
                            </button>
                        </div>

                        <!-- Price Slider Below Carousel -->
                        <div class="mt-1 mb-6 w-1/2 mx-auto border rounded-lg p-4">
                            <div class="text-sm font-medium mb-2 flex justify-between items-center">
                                <span>Propose your price:</span>
                                <span x-text="proposedPrice + ' EUR/night'" class="text-black font-bold"></span>
                            </div>
                            <div class="relative w-full">
                                <style>
                                    /* Custom styling for range input */
                                    input[type="range"] {
                                        -webkit-appearance: none;
                                        width: 100%;
                                        height: 8px;
                                        border-radius: 5px;
                                        background: #e5e7eb;
                                        /* gray-200 */
                                        outline: none;
                                    }

                                    /* Thumb styling */
                                    input[type="range"]::-webkit-slider-thumb {
                                        -webkit-appearance: none;
                                        appearance: none;
                                        width: 20px;
                                        height: 20px;
                                        border-radius: 50%;
                                        background: white;
                                        border: 2px solid black;
                                        cursor: pointer;
                                        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
                                    }

                                    input[type="range"]::-moz-range-thumb {
                                        width: 20px;
                                        height: 20px;
                                        border-radius: 50%;
                                        background: white;
                                        border: 2px solid black;
                                        cursor: pointer;
                                        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
                                    }

                                    /* Track progress fill effect */
                                    input[type="range"] {
                                        background: linear-gradient(to right,
                                                black 0%,
                                                black calc((var(--value) - var(--min)) / (var(--max) - var(--min)) * 100%),
                                                #e5e7eb calc((var(--value) - var(--min)) / (var(--max) - var(--min)) * 100%),
                                                #e5e7eb 100%);
                                    }
                                </style>
                                <input type="range" :min="minPrice" :max="maxPrice" step="1"
                                    x-model.number="proposedPrice"
                                    x-init="$el.style.setProperty('--value', proposedPrice); $el.style.setProperty('--min', minPrice); $el.style.setProperty('--max', maxPrice)"
                                    @input="$el.style.setProperty('--value', proposedPrice)"
                                    x-effect="$el.style.setProperty('--min', minPrice); $el.style.setProperty('--max', maxPrice)"
                                    class="w-full" />
                                <div class="w-full flex justify-between text-xs text-gray-500 mt-2">
                                    <span x-text="minPrice + ' EUR/night'"></span>
                                    <span x-text="maxPrice + ' EUR/night'"></span>
                                </div>
                            </div>
                            <button
                                class="w-full mt-3 py-2 bg-black hover:bg-gray-900 text-white rounded-md transition duration-200"
                                @click="makeOffer()">
                                Make Offer
                            </button>
                            <p class="text-xs text-gray-500 mt-1 text-center">Subject to availability</p>
                        </div>
                    </div>
                </div>
                <!-- Room Customization Component -->
                <div class="section rounded-lg shadow-sm mt-6" x-data="{
    openSections: {
      beds: true,
      location: true,
      view: true,
      floor: true
    },
  
    toggleSection(section) {
      this.openSections[section] = !this.openSections[section];
    },
    openModal(modalId) {
      console.log(modalId)
      this.$refs[modalId].showModal();
    },
    openFloorModal(modalId) {
      this.$refs[modalId].showModal();
    },
    get selectedOptions() {
      // Create a mapping of category to selected ID
      const selections = {};
      Object.entries($store.booking.customizations).forEach(([category, option]) => {
        selections[category] = option ? option.id : '';
      });
      return selections;
    },
    sectionInfo: {
      beds: 'Choose the type of bed you prefer for your stay. Each option offers different levels of comfort and space according to your needs. King-size beds are ideal for couples who want more space, while single beds are perfect for friends or family.',
      location: 'The location of your room can significantly affect your experience. Corner rooms offer more privacy, while suites with sea views provide impressive ocean panoramas. Choose the location that best suits your preferences.',
      view: 'Select the exact view from your room. Each option offers a unique perspective of the hotel surroundings, from city panoramas to impressive sunrises over the sea.',
      floor: 'The floor where your room is located can influence the view, noise, and accessibility. Upper floors offer better views and less noise, while lower floors provide faster access to hotel facilities.'
    },
    bedsOptions: [
      {
        id: 'king',
        icon: 'bed',
        label: 'King size bed',
        description: 'Non-smoking room',
        price: 9.00
      },
      {
        id: 'twin',
        icon: 'bed',
        label: 'Two single beds',
        description: 'Non-smoking room',
        price: 0.00
      },
      {
        id: 'queen',
        icon: 'bed',
        label: 'Queen size bed',
        description: 'Smoking room',
        price: 5.00
      },
      {
        id: 'suite',
        icon: 'hotel',
        label: 'Luxury suite',
        description: 'Non-smoking room',
        price: 15.00
      }
    ],
    locationOptions: [
      {
        id: 'main',
        icon: 'building',
        label: 'In the main building',
        description: 'Standard room',
        price: 0.00
      },
      {
        id: 'corner',
        icon: 'corner-up-right',
        label: 'Corner room',
        description: 'Panoramic view',
        price: 5.00
      },
      {
        id: 'sea',
        icon: 'waves',
        label: 'Suite with sea view',
        description: 'Ocean view',
        price: 9.00
      },
      {
        id: 'rooftop',
        icon: 'home',
        label: 'Rooftop suite',
        description: 'Panoramic view',
        price: 12.00
      },
      {
        id: 'rooftop1',
        icon: 'home',
        label: 'Rooftop suite 1',
        description: 'Panoramic view 1',
        price: 15.00
      }
    ],
    viewOptions: [
      { id: 'view1', label: 'Garden view', price: 0.00 },
      { id: 'view2', label: 'Pool view', price: 5.00 },
      { id: 'view3', label: 'Street view', price: 0.00 },
      { id: 'view4', label: 'Ocean view', price: 10.00 },
      { id: 'view5', label: 'Mountain view', price: 7.00 },
      { id: 'view6', label: 'Sunset view', price: 8.00 }
    ],
    floorOptions: [
      {
        id: 'ground',
        icon: 'layout',
        label: 'Ground floor',
        description: 'Easy access',
        price: 0.00
      },
      {
        id: 'middle',
        icon: 'layers',
        label: 'Middle floors',
        description: 'Perfect balance',
        price: 3.00
      },
      {
        id: 'high',
        icon: 'arrow-up',
        label: 'Upper floors',
        description: 'Better view',
        price: 6.00
      },
      {
        id: 'penthouse',
        icon: 'home',
        label: 'Penthouse',
        description: 'Premium experience',
        price: 20.00
      }
    ],
    handleSelect(category, id) {
      // Find the option details
      let optionDetails;
      let price = 0;
      let label = '';
      
      switch(category) {
        case 'beds':
          optionDetails = this.bedsOptions.find(o => o.id === id);
          break;
        case 'location':
          optionDetails = this.locationOptions.find(o => o.id === id);
          break;
        case 'floor':
          optionDetails = this.floorOptions.find(o => o.id === id);
          break;
        case 'view':
          optionDetails = this.viewOptions.find(o => o.id === id);
          break;
      }
      
      if (optionDetails) {
        price = optionDetails.price;
        label = optionDetails.label;
      }
      
      // Toggle the selection using the global state
      const currentSelectedId = this.selectedOptions[category];
      
      if (currentSelectedId === id) {
        // If already selected, deselect it
        $store.booking.toggleCustomization(category, '', 0, '');
      } else {
        // Otherwise select the new option
        $store.booking.toggleCustomization(category, id, price, label);
      }
    },
    
    init() {
      // No longer needed to watch for changes since we're using a getter
    }
  }">
                    <div class="rounded-lg">
                        <div class="px-4 py-6 bg-white mb-6 rounded-md">
                            <h1 class="text-3xl font-bold text-gray-900 mb-2">Customize your Deluxe Room!</h1>
                            <p class="text-gray-600">
                                Discover our exclusive customization options for an unforgettable stay.
                            </p>
                        </div>

                        <!-- Beds Section -->
                        <div class="mb-6 bg-white rounded-md overflow-hidden border">
                            <div class="flex justify-between items-center px-4 py-3 border-b cursor-pointer"
                                @click="toggleSection('beds')">
                                <div class="flex items-center">
                                    <h2 class="text-xl font-semibold text-gray-800">Beds</h2>
                                    <button @click.stop="openModal('beds')"
                                        class="ml-2 text-gray-500 hover:text-gray-700">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                                            viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                        </svg>
                                    </button>
                                </div>
                                <button class="text-gray-400">
                                    <span class="text-2xl" x-text="openSections.beds ? '−' : '+'"></span>
                                </button>
                            </div>

                            <div x-show="openSections.beds" x-transition:enter="transition ease-out duration-300"
                                x-transition:enter-start="opacity-0 transform -translate-y-4"
                                x-transition:enter-end="opacity-100 transform translate-y-0"
                                x-transition:leave="transition ease-in duration-300"
                                x-transition:leave-start="opacity-100 transform translate-y-0"
                                x-transition:leave-end="opacity-0 transform -translate-y-4"
                                class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 p-4">
                                <template x-for="option in bedsOptions" :key="option.id">
                                    <div class="bg-white border border-gray-200 rounded-lg overflow-hidden">
                                        <div class="p-4">
                                            <div class="flex flex-col mb-1">
                                                <div class="flex gap-2.5 items-center w-20">
                                                    <img src="https://cdn.builder.io/api/v1/image/assets/cdb357f47dc342a99db9a4132e4c6871/96b3a3585c1c453631b2ddc1d2f2323d3f1822a7f54f182cca2d886bd2f0373a?placeholderIfAbsent=true"
                                                        alt="Room icon"
                                                        class="object-contain self-stretch my-auto w-12 aspect-square" />
                                                </div>
                                                <h3 class="font-medium text-gray-900 text-sm" x-text="option.label">
                                                </h3>
                                            </div>
                                            <p class="text-xs text-gray-500 mb-1" x-text="option.description"></p>
                                            <p class="text-sm font-semibold mb-4"
                                                x-text="`${option.price.toFixed(2)}EUR/night`"></p>
                                            <button @click="handleSelect('beds', option.id)"
                                                class="w-full py-2 text-center text-xs font-medium rounded transition-all duration-300"
                                                :class="selectedOptions.beds === option.id ? 
                  'bg-gray-800/90 text-white  ring-2 ring-black/10 ring-offset-2' : 
                  'bg-gray-800 text-white hover:bg-gray-800 hover:translate-y-[-2px] shadow-sm hover:shadow-md'">
                                                <span
                                                    x-text="selectedOptions.beds === option.id ? 'Selected' : 'Upgrade'"></span>
                                            </button>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </div>

                        <!-- Location Section -->
                        <div class="mb-6 bg-white rounded-md overflow-hidden border">
                            <div class="flex justify-between items-center px-4 py-3 border-b cursor-pointer"
                                @click="toggleSection('location')">
                                <div class="flex items-center">
                                    <h2 class="text-xl font-semibold text-gray-800">Location</h2>
                                    <button @click.stop="openModal('location')"
                                        class="ml-2 text-gray-500 hover:text-gray-700">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                                            viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                        </svg>
                                    </button>
                                </div>
                                <button class="text-gray-400">
                                    <span class="text-2xl" x-text="openSections.location ? '−' : '+'"></span>
                                </button>
                            </div>

                            <div x-show="openSections.location" x-transition:enter="transition ease-out duration-300"
                                x-transition:enter-start="opacity-0 transform -translate-y-4"
                                x-transition:enter-end="opacity-100 transform translate-y-0"
                                x-transition:leave="transition ease-in duration-300"
                                x-transition:leave-start="opacity-100 transform translate-y-0"
                                x-transition:leave-end="opacity-0 transform -translate-y-4"
                                class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 p-4">
                                <template x-for="option in locationOptions" :key="option.id">
                                    <div class="bg-white border border-gray-200 rounded-lg overflow-hidden">
                                        <div class="p-4">
                                            <div class="flex flex-col mb-1">
                                                <div class="flex gap-2.5 items-center w-20">
                                                    <i :data-lucide="option.icon" class="h-10 w-10 text-gray-700"></i>
                                                </div>
                                                <h3 class="font-medium text-gray-900 text-sm" x-text="option.label">
                                                </h3>
                                            </div>
                                            <p class="text-xs text-gray-500 mb-1" x-text="option.description"></p>
                                            <p class="text-sm font-semibold mb-4"
                                                x-text="`${option.price.toFixed(2)}EUR/night`"></p>
                                            <button @click="handleSelect('location', option.id)"
                                                class="w-full py-2 text-center text-xs font-medium rounded transition-all duration-300"
                                                :class="selectedOptions.location === option.id ? 
                  'bg-gray-800/90 text-white  ring-2 ring-[#0a1e3c]/10 ring-offset-2' : 
                  'bg-gray-800 text-white hover:bg-[#132d54] hover:translate-y-[-2px] shadow-sm hover:shadow-md'">
                                                <span
                                                    x-text="selectedOptions.location === option.id ? 'Selected' : 'Upgrade'"></span>
                                            </button>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </div>

                        <!-- Floor Section -->
                        <div class="mb-6 bg-white rounded-md overflow-hidden border">
                            <div class="flex justify-between items-center px-4 py-3 border-b cursor-pointer"
                                @click="toggleSection('floor')">
                                <div class="flex items-center">
                                    <h2 class="text-xl font-semibold text-gray-800">Floor</h2>
                                    <button @click.stop="openModal('floor')"
                                        class="ml-2 text-gray-500 hover:text-gray-700">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                                            viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                        </svg>
                                    </button>
                                </div>
                                <button class="text-gray-400">
                                    <span class="text-2xl" x-text="openSections.floor ? '−' : '+'"></span>
                                </button>
                            </div>

                            <div x-show="openSections.floor" x-transition:enter="transition ease-out duration-300"
                                x-transition:enter-start="opacity-0 transform -translate-y-4"
                                x-transition:enter-end="opacity-100 transform translate-y-0"
                                x-transition:leave="transition ease-in duration-300"
                                x-transition:leave-start="opacity-100 transform translate-y-0"
                                x-transition:leave-end="opacity-0 transform -translate-y-4"
                                class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 p-4">
                                <template x-for="option in floorOptions" :key="option.id">
                                    <div class="bg-white border border-gray-200 rounded-lg overflow-hidden">
                                        <div class="p-4">
                                            <div class="flex flex-col mb-1">
                                                <div class="flex gap-2.5 items-center w-20">
                                                    <i :data-lucide="option.icon" class="h-10 w-10 text-gray-700"></i>
                                                </div>
                                                <h3 class="font-medium text-gray-900 text-sm" x-text="option.label">
                                                </h3>
                                            </div>
                                            <p class="text-xs text-gray-500 mb-1" x-text="option.description"></p>
                                            <p class="text-sm font-semibold mb-4"
                                                x-text="`${option.price.toFixed(2)}EUR/night`"></p>
                                            <div class="flex flex-col space-y-2">
                                                <button @click="handleSelect('floor', option.id)"
                                                    class="w-full py-2 text-center text-xs font-medium rounded transition-all duration-300"
                                                    :class="selectedOptions.floor === option.id ? 
                    'bg-gray-800/90 text-white  ring-2 ring-black/10 ring-offset-2' : 
                    'bg-gray-800 text-white hover:bg-gray-800 hover:translate-y-[-2px] shadow-sm hover:shadow-md'">
                                                    <span
                                                        x-text="selectedOptions.floor === option.id ? 'Selected' : 'Upgrade'"></span>
                                                </button>
                                                <button @click.stop="openModal('floor')"
                                                    class="text-xs text-gray-600 hover:text-gray-800 underline transition-colors">
                                                    Features and benefits
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </div>

                        <!-- Exact View Section -->
                        <div class="bg-white rounded-md overflow-hidden border">
                            <div class="flex justify-between items-center px-4 py-3 border-b cursor-pointer"
                                @click="toggleSection('view')">
                                <div class="flex items-center">
                                    <h2 class="text-xl font-semibold text-gray-800">Exact View</h2>
                                </div>
                                <button class="text-gray-400">
                                    <span class="text-2xl" x-text="openSections.view ? '−' : '+'"></span>
                                </button>
                            </div>

                            <div x-show="openSections.view" x-transition:enter="transition ease-out duration-300"
                                x-transition:enter-start="opacity-0 transform -translate-y-4"
                                x-transition:enter-end="opacity-100 transform translate-y-0"
                                x-transition:leave="transition ease-in duration-300"
                                x-transition:leave-start="opacity-100 transform translate-y-0"
                                x-transition:leave-end="opacity-0 transform -translate-y-4"
                                class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 p-4">
                                <template x-for="view in viewOptions" :key="view.id">
                                    <div class="border border-gray-200 rounded-lg overflow-hidden">
                                        <div class="relative">
                                            <img src="https://picsum.photos/600/400"
                                                :alt="`Room view option - ${view.label}`"
                                                class="w-full h-56 object-cover" />
                                            <div class="absolute bottom-0 left-10 right-10 py-2 text-center">
                                                <button @click="handleSelect('view', view.id)"
                                                    class="text-xs font-medium mb-4 p-3 rounded shadow transition-all duration-300"
                                                    :class="selectedOptions.view === view.id ? 
                            'bg-white/90 text-gray-800 ring-2 ring-gray-400/10 ring-offset-2' : 
                            'bg-white text-gray-800 hover:bg-gray-100 hover:translate-y-[-2px] hover:shadow-md'">
                                                    <span
                                                        x-text="selectedOptions.view === view.id ? 'Selected' : `Add for ${view.price.toFixed(2)} EUR`"></span>
                                                </button>
                                            </div>
                                            <div
                                                class="absolute top-2 left-2 bg-gray-800/70 text-white text-xs px-2 py-1 rounded">
                                                <span x-text="view.label"></span>
                                            </div>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </div>
                    </div>

                    <dialog id="dialog-beds" x-ref="beds" class="p-0 rounded-lg shadow-xl max-w-md w-full">
                        <div class="bg-white p-6 rounded-lg">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-semibold">Information about Beds</h3>
                                <button onclick="document.querySelector('#dialog-beds').close()"
                                    class="text-gray-500 hover:text-gray-700">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                </button>
                            </div>
                            <div class="text-gray-600">
                                Choose the type of bed you prefer for your stay. Each option offers different levels of
                                comfort and space according to your needs. King-size beds are ideal for couples who want
                                more space, while single beds are perfect for friends or family.
                            </div>
                            <div class="mt-6">
                                <button onclick="document.querySelector('#dialog-beds').close()"
                                    class="w-full py-2 text-center font-medium rounded bg-gray-800 text-white hover:bg-gray-700 transition-colors">
                                    Got it
                                </button>
                            </div>
                        </div>
                    </dialog>

                    <dialog id="dialog-location" x-ref="location" class="p-0 rounded-lg shadow-xl max-w-md w-full">
                        <div class="bg-white p-6 rounded-lg">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-semibold">Information about Location</h3>
                                <button onclick="document.querySelector('#dialog-location').close()"
                                    class="text-gray-500 hover:text-gray-700">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                </button>
                            </div>
                            <div class="text-gray-600">
                                The location of your room can significantly affect your experience. Corner rooms offer
                                more privacy, while suites with sea views provide impressive ocean panoramas. Choose the
                                location that best suits your preferences.
                            </div>
                            <div class="mt-6">
                                <button onclick="document.querySelector('#dialog-location').close()"
                                    class="w-full py-2 text-center font-medium rounded bg-gray-800 text-white hover:bg-gray-700 transition-colors">
                                    Got it
                                </button>
                            </div>
                        </div>
                    </dialog>

                    <dialog id="dialog-floor" x-ref="floor" class="p-0 rounded-lg shadow-xl max-w-md w-full">
                        <div class="bg-white p-6 rounded-lg">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-xl font-semibold">Information about Floor</h3>
                                <button onclick="document.querySelector('#dialog-floor').close()"
                                    class="text-gray-500 hover:text-gray-700">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                </button>
                            </div>
                            <div class="text-gray-600">
                                The floor where your room is located can influence the view, noise, and accessibility.
                                Upper floors offer better views and less noise, while lower floors provide faster access
                                to hotel facilities.
                            </div>
                            <div class="mt-6">
                                <button onclick="document.querySelector('#dialog-floor').close()"
                                    class="w-full py-2 text-center font-medium rounded bg-gray-800 text-white hover:bg-gray-700 transition-colors">
                                    Got it
                                </button>
                            </div>
                        </div>
                    </dialog>

                    <!-- 
    <dialog id="dialog-ground-details" x-ref="ground-details" class="p-0 rounded-lg shadow-xl max-w-md w-full">
      <div class="bg-white p-6 rounded-lg">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-semibold">Planta Baja</h3>
          <button @click="$refs['ground-details'].close()" class="text-gray-500 hover:text-gray-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        <div class="text-gray-700">
          <p class="mb-4">Ideal para huéspedes que prefieren evitar ascensores. Disfrute de un acceso rápido al lobby,
            restaurantes y áreas de piscina sin esperas.</p>
  
          <h4 class="font-medium text-gray-900 mb-2">Ventajas de la Planta Baja:</h4>
          <ul class="list-disc pl-5 space-y-1 text-sm mb-4">
            <li>Acceso directo al jardín y piscina</li>
            <li>Ideal para personas con movilidad reducida</li>
            <li>Fácil acceso a restaurantes y servicios</li>
            <li>Sin necesidad de ascensores o escaleras</li>
            <li>Llegada rápida a su habitación desde la recepción</li>
          </ul>
  
          <p class="text-sm italic">Perfecto para: Familias con niños pequeños, personas mayores o con movilidad reducida,
            y huéspedes que valoran la comodidad de acceso rápido.</p>
        </div>
        <div class="mt-6">
          <button @click="$refs['ground-details'].close()"
            class="w-full py-2 text-center font-medium rounded bg-gray-800 text-white hover:bg-gray-700 transition-colors">
            Cerrar
          </button>
        </div>
      </div>
    </dialog>
  
    <dialog id="dialog-middle-details" x-ref="middle-details" class="p-0 rounded-lg shadow-xl max-w-md w-full">
      <div class="bg-white p-6 rounded-lg">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-semibold">Pisos Intermedios</h3>
          <button @click="$refs['middle-details'].close()" class="text-gray-500 hover:text-gray-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        <div class="text-gray-700">
          <p class="mb-4">Experimente la combinación ideal de tranquilidad y acceso conveniente. Estos pisos ofrecen
            buenas vistas panorámicas con un ambiente más sereno.</p>
  
          <h4 class="font-medium text-gray-900 mb-2">Ventajas de los Pisos Intermedios:</h4>
          <ul class="list-disc pl-5 space-y-1 text-sm mb-4">
            <li>Equilibrio perfecto entre vista y accesibilidad</li>
            <li>Menor nivel de ruido que en la planta baja</li>
            <li>Vistas panorámicas a la ciudad o área circundante</li>
            <li>Acceso rápido a todas las instalaciones</li>
            <li>Ideal para estancias prolongadas</li>
          </ul>
  
          <p class="text-sm italic">Perfecto para: Viajeros de negocios, parejas y cualquier huésped que busque un
            equilibrio entre comodidad, vista y accesibilidad.</p>
        </div>
        <div class="mt-6">
          <button @click="$refs['middle-details'].close()"
            class="w-full py-2 text-center font-medium rounded bg-gray-800 text-white hover:bg-gray-700 transition-colors">
            Cerrar
          </button>
        </div>
      </div>
    </dialog>
  
    <dialog id="dialog-high-details" x-ref="high-details" class="p-0 rounded-lg shadow-xl max-w-md w-full">
      <div class="bg-white p-6 rounded-lg">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-semibold">Pisos Superiores</h3>
          <button @click="$refs['high-details'].close()" class="text-gray-500 hover:text-gray-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        <div class="text-gray-700">
          <p class="mb-4">Disfrute de impresionantes vistas panorámicas desde nuestros pisos superiores. El ambiente es
            más exclusivo, silencioso y luminoso, ideal para una experiencia premium.</p>
  
          <h4 class="font-medium text-gray-900 mb-2">Ventajas de los Pisos Superiores:</h4>
          <ul class="list-disc pl-5 space-y-1 text-sm mb-4">
            <li>Vistas espectaculares de 360° del entorno</li>
            <li>Máxima privacidad y ambiente exclusivo</li>
            <li>Mínimo nivel de ruido para un descanso óptimo</li>
            <li>Mayor luminosidad natural</li>
            <li>Experiencia de hospedaje premium</li>
          </ul>
  
          <p class="text-sm italic">Perfecto para: Parejas en luna de miel, viajeros que buscan tranquilidad, y huéspedes
            que valoran las vistas panorámicas y la privacidad.</p>
        </div>
        <div class="mt-6">
          <button @click="$refs['high-details'].close()"
            class="w-full py-2 text-center font-medium rounded bg-gray-800 text-white hover:bg-gray-700 transition-colors">
            Cerrar
          </button>
        </div>
      </div>
    </dialog>
  
    <dialog id="dialog-penthouse-details" x-ref="penthouse-details" class="p-0 rounded-lg shadow-xl max-w-md w-full">
      <div class="bg-white p-6 rounded-lg">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-semibold">Penthouse</h3>
          <button @click="$refs['penthouse-details'].close()" class="text-gray-500 hover:text-gray-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>
        <div class="text-gray-700">
          <p class="mb-4">Nuestra opción más exclusiva. El penthouse ofrece la experiencia definitiva de lujo con servicio
            personalizado, vistas incomparables y amenidades premium.</p>
  
          <h4 class="font-medium text-gray-900 mb-2">Ventajas del Penthouse:</h4>
          <ul class="list-disc pl-5 space-y-1 text-sm mb-4">
            <li>Ubicación privilegiada en lo más alto del edificio</li>
            <li>Vistas panorámicas espectaculares de 360°</li>
            <li>Terraza privada con área de descanso al aire libre</li>
            <li>Servicio de mayordomo exclusivo disponible</li>
            <li>Máxima privacidad y seguridad</li>
            <li>Decoración y amenidades de lujo superior</li>
          </ul>
  
          <p class="text-sm italic">Perfecto para: Celebraciones especiales, lunas de miel, ocasiones memorables y
            huéspedes que buscan la experiencia más exclusiva y lujosa posible.</p>
        </div>
        <div class="mt-6">
          <button @click="$refs['penthouse-details'].close()"
            class="w-full py-2 text-center font-medium rounded bg-gray-800 text-white hover:bg-gray-700 transition-colors">
            Cerrar
          </button>
        </div>
      </div>
    </dialog> -->
                </div>
                <!-- Room Customization Component -->
                <div class="section bg-white p-6 rounded-lg shadow-sm mt-6">
                    <div class="">
                        <h1 class="text-3xl font-bold text-gray-900 mb-2">Choose your room number.</h1>
                        <p class="text-gray-600 mb-8">
                            Explore the hotel and choose the exact room where you want to stay.
                        </p>
                    </div>
                    <div class="relative w-full overflow-auto h-[calc(100vh-48px)] md:h-auto">
                        <img src="https://hvdataprostgweu.blob.core.windows.net/renderimages/h305/views/01_main/01d77a02-b92f-4214-a87c-79920dcbeded/background.webp"
                            alt="Hotel exterior view" class="w-full h-full object-cover rounded-md"
                            onerror="this.src='https://cdnjs.cloudflare.com/ajax/libs/placeholder-loading/0.6.0/img/background.jpg'">
                    </div>
                </div>
                <!-- Special Offers Component -->
                <div class="section bg-white p-6 rounded-lg" x-data="{
    offers: [
      {
        id: 1,
        title: 'Spa Bath: Relax in Style',
        description: 'Indulge in our luxurious spa facilities',
        price: 59.99,
        type: 'perStay',
        image: 'https://placehold.co/300x300',
      },
      {
        id: 2,
        title: 'Gourmet Dining: Culinary Delights',
        description: 'Experience exquisite flavors and presentation',
        price: 99.00,
        type: 'perPerson',
        image: 'https://placehold.co/300x300',
      },
      {
        id: 3,
        title: 'Adventure Tours: Explore the Wild',
        description: 'Discover exciting outdoor activities',
        price: 150.00,
        type: 'perNight',
        image: 'https://placehold.co/300x300',
      },
      {
        id: 4,
        title: 'Romantic Package',
        description: 'Special touches for a memorable romantic stay',
        price: 75.00,
        type: 'perStay',
        image: 'https://placehold.co/300x300',
      },
      {
        id: 5,
        title: 'Airport Transfer',
        description: 'Hassle-free transportation to/from the airport',
        price: 45.00,
        type: 'perPerson',
        image: 'https://placehold.co/300x300',
      },
      {
        id: 6,
        title: 'Wellness Package',
        description: 'Daily yoga and meditation sessions',
        price: 120.00,
        type: 'perNight',
        image: 'https://placehold.co/300x300',
      },
    ],
    
    // Track selections for each offer
    selections: {
      1: { quantity: 2 },
      2: { quantity: 1, persons: 2 },
      3: { quantity: 1, nights: 3 },
      4: { quantity: 0 },
      5: { quantity: 0, persons: 1 },
      6: { quantity: 0, nights: 1 },
    },
    
    // Format price with euro symbol
    formatPrice(price) {
      return '€' + price.toFixed(2);
    },
    
    // Get unit label based on offer type
    getUnitLabel(type) {
      switch (type) {
        case 'perStay':
          return 'per stay';
        case 'perPerson':
          return 'per person';
        case 'perNight':
          return 'per night';
        default:
          return '';
      }
    },
    
    // Calculate total for an offer
    calculateTotal(offer) {
      const id = offer.id;
      const selection = this.selections[id];
      
      if (selection.quantity === 0) return 0;
      
      switch (offer.type) {
        case 'perPerson':
          return offer.price * selection.quantity * (selection.persons || 1);
        case 'perNight':
          return offer.price * selection.quantity * (selection.nights || 1);
        default: // perStay
          return offer.price * selection.quantity;
      }
    },
    
    // Update quantity for an offer
    updateQuantity(id, change) {
      const newQuantity = Math.max(0, this.selections[id].quantity + change);
      this.selections[id].quantity = newQuantity;
    },
    
    // Book the offer (add to global store)
    bookOffer(id) {
      const offer = this.offers.find(o => o.id === id);
      const selection = this.selections[id];
      
      if (selection.quantity === 0) return;
      
      // Create the offer data
      const offerData = {
        id: offer.id,
        name: offer.title,
        price: this.calculateTotal(offer),
        quantity: selection.quantity,
        type: offer.type
      };
      
      // Add additional data based on type
      if (offer.type === 'perPerson') {
        offerData.persons = selection.persons || 1;
      }
      
      if (offer.type === 'perNight') {
        offerData.nights = selection.nights || 1;
      }
      
      // Add to store
      if (typeof $store !== 'undefined' && $store.booking) {
        $store.booking.updateSpecialOffer(offerData);
      } else {
        console.log('Booked offer:', offerData);
      }
    }
  }">
                    <div class="mb-8">
                        <h2 class="text-3xl font-bold mb-2">Special Offers Tailored for You!</h2>
                        <p class="text-gray-600">Enhance your stay with these exclusive experiences.</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <template x-for="offer in offers" :key="offer.id">
                            <!-- Card Component -->
                            <div class="rounded border border-gray-200 bg-white overflow-hidden flex flex-col">
                                <!-- Image Container -->
                                <div class="flex items-center justify-center h-48 bg-gray-100">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-gray-400" fill="none"
                                        viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                    </svg>
                                </div>

                                <!-- Content -->
                                <div class="p-4 flex-grow flex flex-col">
                                    <!-- Title and Description -->
                                    <div>
                                        <h3 class="text-xl font-bold" x-text="offer.title"></h3>
                                        <p class="text-gray-600 mt-1" x-text="offer.description"></p>
                                    </div>

                                    <!-- Price and Quantity -->
                                    <div class="mt-4 flex items-center justify-between">
                                        <div>
                                            <span class="text-xl font-bold" x-text="formatPrice(offer.price)"></span>
                                            <span class="text-gray-500 text-sm"
                                                x-text="getUnitLabel(offer.type)"></span>
                                        </div>

                                        <!-- Quantity Controls -->
                                        <div class="flex items-center">
                                            <button
                                                class="w-8 h-8 flex items-center justify-center border border-gray-300 rounded-md bg-white"
                                                @click="updateQuantity(offer.id, -1)">
                                                <span class="text-lg">−</span>
                                            </button>
                                            <span class="mx-3 w-6 text-center"
                                                x-text="selections[offer.id].quantity"></span>
                                            <button
                                                class="w-8 h-8 flex items-center justify-center border border-gray-300 rounded-md bg-white"
                                                @click="updateQuantity(offer.id, 1)">
                                                <span class="text-lg">+</span>
                                            </button>
                                        </div>
                                    </div>

                                    <!-- Per Person Controls -->
                                    <div x-show="offer.type === 'perPerson' && selections[offer.id].quantity > 0"
                                        class="mt-4">
                                        <label class="flex items-center text-sm text-gray-700 mb-1">
                                            Number of persons
                                        </label>
                                        <select x-model="selections[offer.id].persons"
                                            class="w-full py-2 px-3 border border-gray-300 rounded-md">
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                            <option value="5">5</option>
                                            <option value="6">6</option>
                                        </select>
                                    </div>

                                    <!-- Per Night Controls -->
                                    <div x-show="offer.type === 'perNight' && selections[offer.id].quantity > 0"
                                        class="mt-4">
                                        <label class="flex items-center text-sm text-gray-700 mb-1">
                                            Number of nights
                                        </label>
                                        <select x-model="selections[offer.id].nights"
                                            class="w-full py-2 px-3 border border-gray-300 rounded-md">
                                            <option value="1">1</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                            <option value="5">5</option>
                                            <option value="6">6</option>
                                            <option value="7">7</option>
                                        </select>
                                    </div>

                                    <!-- Total -->
                                    <div x-show="selections[offer.id].quantity > 0"
                                        class="mt-4 bg-gray-100 p-3 rounded-md">
                                        <div class="flex justify-between items-center">
                                            <span class="font-medium text-gray-700">Total:</span>
                                            <span class="font-bold" x-text="formatPrice(calculateTotal(offer))"></span>
                                        </div>
                                    </div>

                                    <!-- Spacer to push button to bottom -->
                                    <div class="flex-grow"></div>

                                    <!-- Book Now Button - Always at bottom -->
                                    <div class="mt-4">
                                        <button @click="bookOffer(offer.id)"
                                            style="width: 100%; padding: 12px; margin-top: 8px; background-color: #111827; color: white; font-weight: 500; border-radius: 6px; display: block;">
                                            Book Now
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
            <!-- Pricing Summary Panel Component -->
            <div class="border rounded-lg overflow-hidden bg-white h-fit shadow-sm w-[400px] sticky top-28" x-data="{
    // Local component state
    roomUpgrade: $store.booking.selectedRoom,
    customizations: $store.booking.getActiveCustomizations(),
    specialOffers: $store.booking.specialOffers,
    
    // Toast notification system
    toasts: [],
    showToast(message, type = 'success') {
      const id = Date.now();
      this.toasts.push({ id, message, type });
      
      // Auto-remove toast after 3 seconds
      setTimeout(() => {
        this.removeToast(id);
      }, 3000);
    },
    
    removeToast(id) {
      const index = this.toasts.findIndex(toast => toast.id === id);
      if (index !== -1) {
        this.toasts.splice(index, 1);
      }
    },
    
    // Subtotal calculation
    get subtotal() {
      return $store.booking.calculateTotal();
    },
    
    get taxes() {
      return $store.booking.calculateTaxes();
    },
    
    get total() {
      return this.subtotal + this.taxes;
    },
    
    removeCustomization(optionId, label) {
      // Find the category
      const category = Object.keys($store.booking.customizations).find(key => 
        $store.booking.customizations[key]?.id === optionId
      );
      
      if (category) {
        // Set it to null
        $store.booking.customizations[category] = null;
        
        // Force refresh of local data
        this.customizations = $store.booking.getActiveCustomizations();
        
        // Show toast notification
        this.showToast(`Se ha eliminado: ${label}`, 'info');
      }
    },
    
    removeSpecialOffer(offerId, offerName) {
      $store.booking.toggleSpecialOffer({id: offerId});
      this.showToast(`Se ha eliminado: ${offerName}`, 'info');
    },
    
    removeRoomUpgrade() {
      $store.booking.selectRoom({id: 'deluxe-double', name: 'Deluxe Double Room', price: 0});
      this.showToast('Se ha eliminado la mejora de habitación', 'info');
    },
    
    init() {
      // Watch for changes in the global store
      this.$watch('$store.booking.selectedRoom', (value, oldValue) => {
        this.roomUpgrade = value;
        if (oldValue && value.id !== oldValue.id) {
          if (value.id === 'deluxe-double') {
            // Downgrade notification
            this.showToast('Se ha eliminado la mejora de habitación', 'info');
          } else {
            // Upgrade notification
            this.showToast(`Se ha añadido: ${value.name}`, 'success');
          }
        }
      });
      
      // Deep watch for customizations
      this.$watch('$store.booking.customizations', (value, oldValue) => {
        const newCustomizations = $store.booking.getActiveCustomizations();
        
        // Check if items were added or removed
        if (newCustomizations.length > this.customizations.length) {
          // Find the new customization
          const newItem = newCustomizations.find(item => 
            !this.customizations.some(old => old.id === item.id)
          );
          if (newItem) {
            this.showToast(`Se ha añadido: ${newItem.label}`, 'success');
          }
        }
        
        this.customizations = newCustomizations;
      }, { deep: true });
      
      this.$watch('$store.booking.specialOffers', (value, oldValue) => {
        if (value.length > this.specialOffers.length) {
          // Find the new offer
          const newOffer = value.find(offer => 
            !this.specialOffers.some(old => old.id === offer.id)
          );
          if (newOffer) {
            this.showToast(`Se ha añadido: ${newOffer.name}`, 'success');
          }
        }
        this.specialOffers = value;
      });
    }
  }">
                <!-- Added hotel room image at the top -->
                <div class="w-full h-40 bg-gray-200 overflow-hidden">
                    <img src="https://hvdataprostgweu.blob.core.windows.net/renderimages/h305/views/01_main/01d77a02-b92f-4214-a87c-79920dcbeded/background.webp"
                        alt="Habitación de hotel" class="w-full h-full object-cover" />
                </div>

                <!-- Content container with padding -->
                <div class="p-4">

                    <!-- Room Selection Section -->
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-1">
                            <h3 class="font-medium">Selected Room</h3>
                            <div class="flex items-center" x-show="roomUpgrade && roomUpgrade.id !== 'deluxe-double'">
                                <button class="text-sm text-gray-500 font-medium underline">Edit</button>
                                <button class="ml-2">
                                    <i data-lucide="pencil" class="h-4 w-4 text-gray-500"></i>
                                </button>
                            </div>
                        </div>
                        <div class="flex justify-between items-center" x-show="roomUpgrade"
                            x-transition:enter="transition ease-out duration-300"
                            x-transition:enter-start="opacity-0 transform scale-95"
                            x-transition:enter-end="opacity-100 transform scale-100"
                            x-transition:leave="transition ease-in duration-200"
                            x-transition:leave-start="opacity-100 transform scale-100"
                            x-transition:leave-end="opacity-0 transform scale-95">
                            <span class="text-sm" x-text="roomUpgrade.name"></span>
                            <div class="flex items-center">
                                <span class="text-sm font-medium mr-1" x-show="roomUpgrade.price > 0">
                                    + <span x-text="roomUpgrade.price.toFixed(2)"></span> EUR
                                </span>
                                <button x-show="roomUpgrade.id !== 'deluxe-double'" @click="removeRoomUpgrade()"
                                    class="border border-gray-300 rounded-full h-5 w-5 flex items-center justify-center hover:bg-gray-100 transition-colors">
                                    -
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="h-[1px] w-full bg-gray-200 my-4"></div>

                    <!-- Room Customizations Section -->
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-1">
                            <h3 class="font-medium">Information about upgrades</h3>
                            <div class="flex items-center" x-show="customizations.length > 0">
                                <button class="text-sm text-gray-500 font-medium underline">Edit</button>
                                <button class="ml-2">
                                    <i data-lucide="pencil" class="h-4 w-4 text-gray-500"></i>
                                </button>
                            </div>
                        </div>
                        <div class="space-y-2" x-show="customizations.length > 0">
                            <template x-for="(option, index) in customizations" :key="option.id">
                                <div class="flex justify-between items-center"
                                    x-transition:enter="transition ease-out duration-300"
                                    x-transition:enter-start="opacity-0 transform -translate-x-4"
                                    x-transition:enter-end="opacity-100 transform translate-x-0"
                                    x-transition:leave="transition ease-in duration-200"
                                    x-transition:leave-start="opacity-100 transform translate-x-0"
                                    x-transition:leave-end="opacity-0 transform -translate-x-4">
                                    <span class="text-sm" x-text="option.label"></span>
                                    <div class="flex items-center">
                                        <span class="text-sm font-medium mr-1" x-show="option.price > 0">+ <span
                                                x-text="option.price.toFixed(2)"></span> EUR</span>
                                        <button @click="removeCustomization(option.id, option.label)"
                                            class="border border-gray-300 rounded-full h-5 w-5 flex items-center justify-center hover:bg-gray-100 transition-colors">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                                                stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                stroke-linejoin="round" class="h-3 w-3">
                                                <path d="M5 12h14"></path>
                                            </svg>
                                        </button>
                                    </div>
                                </div>
                            </template>
                        </div>
                        <div x-show="customizations.length === 0" class="text-sm text-gray-500 italic">
                            No upgrades selected
                        </div>
                    </div>

                    <!-- Special Offers Section -->
                    <div class="mb-4">
                        <div class="h-[1px] w-full bg-gray-200 my-4"></div>
                        <div class="flex justify-between items-center mb-1">
                            <h3 class="font-medium">Special Offers</h3>
                            <div class="flex items-center" x-show="specialOffers.length > 0">
                                <button class="text-sm text-gray-500 font-medium underline">Edit</button>
                                <button class="ml-2">
                                    <i data-lucide="pencil" class="h-4 w-4 text-gray-500"></i>
                                </button>
                            </div>
                        </div>
                        <div class="space-y-2" x-show="specialOffers.length > 0">
                            <template x-for="(offer, index) in specialOffers" :key="offer.id">
                                <div class="flex justify-between items-center"
                                    x-transition:enter="transition ease-out duration-300"
                                    x-transition:enter-start="opacity-0 transform -translate-x-4"
                                    x-transition:enter-end="opacity-100 transform translate-x-0"
                                    x-transition:leave="transition ease-in duration-200"
                                    x-transition:leave-start="opacity-100 transform translate-x-0"
                                    x-transition:leave-end="opacity-0 transform -translate-x-4">
                                    <span class="text-sm" x-text="offer.name"></span>
                                    <div class="flex items-center">
                                        <span class="text-sm font-medium mr-1" x-show="offer.price > 0">+ <span
                                                x-text="offer.price.toFixed(2)"></span> EUR</span>
                                        <button @click="removeSpecialOffer(offer.id, offer.name)"
                                            class="border border-gray-300 rounded-full h-5 w-5 flex items-center justify-center hover:bg-gray-100 transition-colors">
                                            -
                                        </button>
                                    </div>
                                </div>
                            </template>
                        </div>
                        <div x-show="specialOffers.length === 0" class="text-sm text-gray-500 italic">
                            No special offers selected
                        </div>
                    </div>

                    <div class="h-[1px] w-full bg-gray-200 my-4"></div>

                    <!-- Price Breakdown -->
                    <div class="space-y-2 mb-6">
                        <div class="flex justify-between">
                            <span>Subtotal</span>
                            <span><span x-text="subtotal.toFixed(2)"></span> EUR</span>
                        </div>
                        <div class="flex justify-between font-bold pt-2">
                            <span>Final Total</span>
                            <span class="transition-all duration-500 ease-in-out"
                                :class="{'scale-110 text-blue-600': $store.booking.calculateTotal() !== subtotal}">
                                <span x-text="total.toFixed(2)"></span> EUR
                            </span>
                        </div>
                    </div>

                    <div class="h-[1px] w-full bg-gray-200 my-4"></div>

                    <!-- Rate information -->
                    <div class="mb-4">
                        <div class="flex items-center mb-2">
                            <i data-lucide="credit-card" class="h-5 w-5 text-gray-500 mr-2"></i>
                            <span class="text-sm text-gray-600">Pay at the hotel</span>
                        </div>

                        <div class="mt-1">
                            <a href="#" class="text-sm text-gray-500 font-medium underline">View conditions</a>
                        </div>
                    </div>

                    <!-- Confirm Button -->
                    <button
                        class="inline-flex w-full items-center justify-center rounded-md text-sm font-medium bg-black hover:bg-black/90 text-white py-2 transition-colors">
                        Confirm
                    </button>
                </div>

                <!-- Toast Container (Bottom Right) -->
                <div class="fixed bottom-4 right-4 z-50 space-y-2 w-72">
                    <template x-for="toast in toasts" :key="toast.id">
                        <div :class="{
                  'bg-white border-green-400 text-green-700': toast.type === 'success',
                  'bg-white border-blue-400 text-blue-700': toast.type === 'info',
                  'bg-white border-red-400 text-red-700': toast.type === 'error'
                }" class="border-l-4 p-3 rounded shadow-md flex items-start justify-between"
                            x-transition:enter="transition ease-out duration-300"
                            x-transition:enter-start="opacity-0 transform translate-y-2"
                            x-transition:enter-end="opacity-100 transform translate-y-0"
                            x-transition:leave="transition ease-in duration-200"
                            x-transition:leave-start="opacity-100 transform translate-y-0"
                            x-transition:leave-end="opacity-0 transform translate-y-2">
                            <div class="flex items-center">
                                <i data-lucide="check-circle" class="h-5 w-5 mr-2"
                                    x-show="toast.type === 'success'"></i>
                                <i data-lucide="info" class="h-5 w-5 mr-2" x-show="toast.type === 'info'"></i>
                                <i data-lucide="alert-triangle" class="h-5 w-5 mr-2"
                                    x-show="toast.type === 'error'"></i>
                                <span x-text="toast.message"></span>
                            </div>
                            <button @click="removeToast(toast.id)" class="text-gray-500 hover:text-gray-700">
                                <i data-lucide="x" class="h-4 w-4"></i>
                            </button>
                        </div>
                    </template>
                </div>
            </div>
        </section>

        <script>
            // Elements
            const initialH = document.getElementById('initialH');
            const fullText = document.getElementById('fullText');
            const textPaths = document.querySelectorAll('.text-path');
            const hPaths = document.querySelectorAll('.h-path');
            const glow = document.querySelector('.glow');
            const replayBtn = document.getElementById('replayBtn');
            const changeColorBtn = document.getElementById('changeColorBtn');

            // Color options
            const colors = ['#ffffff', '#0088ff', '#ff3366', '#33ff66', '#ffcc00', '#9933ff'];
            let currentColorIndex = 0;

            // Start the sequence
            startSequence();

            function startSequence() {
                // Reset
                initialH.style.opacity = 1;
                initialH.style.animation = 'rotate3D 3s ease-in-out forwards';
                fullText.style.opacity = 0;

                textPaths.forEach(path => {
                    path.style.opacity = 0;
                    path.style.transition = 'none';
                });

                // After 3D rotation completes, start the text reveal
                setTimeout(() => {
                    // Hide the initial H
                    initialH.style.opacity = 0;

                    // Show the full text SVG
                    fullText.style.opacity = 1;

                    // Show text from left to right
                    revealTextFromLeft();
                }, 3000);
            }

            function revealTextFromLeft() {
                // Get all text paths in order
                const orderedPaths = Array.from(textPaths);

                // Start with the first path (after H)
                let currentIndex = 0;

                // Interval to reveal each letter
                const revealInterval = setInterval(() => {
                    if (currentIndex < orderedPaths.length) {
                        const path = orderedPaths[currentIndex];
                        path.style.transition = 'opacity 0.5s ease-in-out';
                        path.style.opacity = 1;
                        currentIndex++;
                    } else {
                        clearInterval(revealInterval);
                    }
                }, 150); // Time between each letter reveal
            }

            // Replay button
            replayBtn.addEventListener('click', () => {
                startSequence();
            });

            // Change color button
            changeColorBtn.addEventListener('click', () => {
                currentColorIndex = (currentColorIndex + 1) % colors.length;
                const newColor = colors[currentColorIndex];

                // Update all paths
                hPaths.forEach(path => path.style.fill = newColor);
                textPaths.forEach(path => path.style.fill = newColor);

                // Update glow color
                const glowColor = newColor === '#ffffff' ?
                    'rgba(0, 136, 255, 0.3)' :
                    `rgba(${hexToRgb(newColor).join(', ')}, 0.3)`;

                glow.style.background = `radial-gradient(circle, ${glowColor} 0%, rgba(0, 0, 0, 0) 70%)`;
            });

            // Helper function to convert hex to RGB
            function hexToRgb(hex) {
                // Remove # if present
                hex = hex.replace('#', '');

                // Parse the hex values
                const r = parseInt(hex.substring(0, 2), 16);
                const g = parseInt(hex.substring(2, 4), 16);
                const b = parseInt(hex.substring(4, 6), 16);

                return [r, g, b];
            }
        </script>

        <!-- Global State Script -->
        <script id="booking-state">
            // Global state management for the booking experience
            // Global state management for the booking experience
            document.addEventListener('alpine:init', () => {
                // Create a global store to share data between components
                Alpine.store('booking', {
                    // Default values
                    selectedRoom: {
                        id: 'deluxe-double',
                        name: 'Deluxe Double Room',
                        price: 0
                    },

                    // Room customizations
                    customizations: {
                        beds: null,  // Bed type
                        location: null, // Location
                        floor: null,   // Floor
                        view: null   // View
                    },

                    // Selected special offers (enhanced to support quantity, persons, nights)
                    specialOffers: [],

                    // Methods to update selections
                    selectRoom(room) {
                        this.selectedRoom = {
                            id: room.id,
                            name: room.name,
                            price: room.price
                        };
                        this.updatePricingSummary();
                    },

                    toggleCustomization(category, option, price, label) {
                        if (this.customizations[category] &&
                            this.customizations[category].id === option) {
                            this.customizations[category] = null;
                        } else {
                            this.customizations[category] = {
                                id: option,
                                price: price,
                                label: label
                            };
                        }
                        this.updatePricingSummary();
                    },

                    // Updated method to add or update a special offer
                    updateSpecialOffer(offer) {
                        const index = this.specialOffers.findIndex(o => o.id === offer.id);

                        if (index >= 0) {
                            this.specialOffers[index] = offer;
                        } else {
                            this.specialOffers.push(offer);
                        }

                        this.updatePricingSummary();
                    },

                    // New method to remove a special offer
                    removeSpecialOffer(offerId) {
                        const index = this.specialOffers.findIndex(o => o.id === offerId);

                        if (index >= 0) {
                            this.specialOffers.splice(index, 1);
                            this.updatePricingSummary();
                        }
                    },

                    // Legacy method for backward compatibility
                    toggleSpecialOffer(offer) {
                        const index = this.specialOffers.findIndex(o => o.id === offer.id);

                        if (index >= 0) {
                            this.specialOffers.splice(index, 1);
                        } else {
                            this.specialOffers.push({
                                id: offer.id,
                                name: offer.title,
                                price: parseFloat(offer.price),
                                priceUnit: offer.priceUnit || 'per stay',
                                quantity: 1
                            });
                        }
                        this.updatePricingSummary();
                    },

                    // Method to trigger pricing summary update
                    updatePricingSummary() {
                        // This will be handled by the pricing-summary component itself
                        // We're just creating a method to explicitly show this intention
                    },

                    // Getter method for active customizations
                    getActiveCustomizations() {
                        return Object.values(this.customizations).filter(item => item !== null);
                    },

                    // Calculate total price
                    calculateTotal() {
                        // Base room price (from room selection)
                        let total = 299.00; // Base price before customizations

                        // Add room upgrade price if selected
                        if (this.selectedRoom && this.selectedRoom.price) {
                            total += this.selectedRoom.price;
                        }

                        // Add customization prices
                        Object.values(this.customizations).forEach(option => {
                            if (option && option.price) {
                                total += option.price;
                            }
                        });

                        // Add special offers - use the price that was calculated 
                        // with quantity, persons, and nights factored in
                        this.specialOffers.forEach(offer => {
                            if (offer && offer.price) {
                                total += offer.price;
                            }
                        });

                        return total;
                    },

                    // Calculate taxes (simplified as percentage of subtotal)
                    calculateTaxes() {
                        return this.calculateTotal() * 0.1; // 10% tax rate
                    }
                });
            });
        </script>

        <script>
            // Function to load HTML components
            async function loadComponent(elementId, filePath) {
                try {
                    const response = await fetch(filePath);
                    const html = await response.text();
                    document.getElementById(elementId).innerHTML = html;

                    // Re-initialize Lucide icons after loading each component
                    // Also, add this to reinitialize icons whenever Alpine.js updates the DOM
                    document.addEventListener('alpine:updating', () => {
                        setTimeout(() => lucide.createIcons(), 0);
                    });
                } catch (error) {
                    console.error(`Error loading ${filePath}:`, error);
                }
            }
        </script>

    </div>
</body>

</html>